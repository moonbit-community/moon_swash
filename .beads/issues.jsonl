{"id":"moon_swash-2ck","title":"variation: add FontRef::variations/instances APIs","description":"Port swash-reference variation.rs surface: NormalizedCoord alias, Variation/Instance iteration, and FontRef helpers. Implementation can leverage moon_skrifa AxisCollection/NamedInstanceCollection for normalization + AVAR.","status":"closed","priority":2,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T18:24:06.749687+08:00","created_by":"Milky2018","updated_at":"2026-01-27T18:28:22.82557+08:00","closed_at":"2026-01-27T18:28:22.82557+08:00","close_reason":"Added Variation/Instance APIs and NormalizedCoord alias"}
{"id":"moon_swash-9g1","title":"Scale: support variable font coords (Setting + normalized_coords)","description":"Port swash-reference Setting\u003cT\u003e parsing (u16/f32) and wire ScalerBuilder.variations/normalized_coords so ScaleContext passes LocationRef with coords to skrifa outlines/hinting.","status":"closed","priority":2,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T17:55:33.981798+08:00","created_by":"Milky2018","updated_at":"2026-01-27T18:15:49.899119+08:00","closed_at":"2026-01-27T18:15:49.899119+08:00","close_reason":"Added Setting parsers and wired ScalerBuilder variation coords support"}
{"id":"moon_swash-b4h","title":"Scale/bitmap: port PNG decode pipeline using moon_yazi zlib","description":"swash-reference uses yazi to inflate PNG IDAT (zlib) when decoding embedded bitmap glyphs. Port scale/bitmap/png.rs behavior in MoonBit on top of moon_yazi, wire into renderer once bitmap/color bitmap sources are implemented.","status":"closed","priority":3,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-25T00:37:13.814822+08:00","created_by":"Milky2018","updated_at":"2026-01-27T17:15:30.671028+08:00","closed_at":"2026-01-27T17:15:30.671028+08:00","close_reason":"Closed","comments":[{"id":4,"issue_id":"moon_swash-b4h","author":"Milky2018","text":"Ported swash-reference PNG decode pipeline and wired into scale_bitmap for sbix/cbdt PNG glyphs. Implemented decode_png in src/scale/bitmap_png.mbt (yazi zlib IDAT inflation + filters), added Mitchell resizer and EBDT 1bpp decoder in src/scale/bitmap.mbt, and added synthetic sbix+ebdt tests. Commit: 7a41969.","created_at":"2026-01-27T09:15:18Z"}]}
{"id":"moon_swash-or2","title":"Scale: adopt moon_skrifa outlines/hinting to match swash-reference","description":"Current ScaleContext/Scaler uses a manual glyf decoder fallback. Align with swash-reference by using moon_skrifa OutlineGlyphCollection draw + hinting (size/variations), and remove the manual TrueType glyf decoding path once moon_skrifa APIs are sufficient.","status":"closed","priority":2,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-25T00:37:12.808106+08:00","created_by":"Milky2018","updated_at":"2026-01-27T17:50:45.878909+08:00","closed_at":"2026-01-27T17:50:45.878909+08:00","close_reason":"Implemented skrifa hinting instance cache and integrated into scale builder","comments":[{"id":1,"issue_id":"moon_swash-or2","author":"Milky2018","text":"Checked moon_skrifa 0.1.2: outline module now uses Double PathElement coords, introduces core package with GlyphId wrapper, and includes embedded TT hinting engine + parity tests. Updated moon_swash scale package imports/calls accordingly (now calling OutlineGlyphCollection::draw with DrawSettings and core.GlyphId).","created_at":"2026-01-27T07:15:27Z"},{"id":2,"issue_id":"moon_swash-or2","author":"Milky2018","text":"Implemented initial zeno-based Outline rendering: Render::render_into now rasterizes scaled outlines via moon_zeno Mask::with_scratch; Outline gained path() + embolden() port; GlyphId aligned to UInt16 like swash-reference; ScaleContext now holds render scratch state.","created_at":"2026-01-27T07:44:51Z"},{"id":3,"issue_id":"moon_swash-or2","author":"Milky2018","text":"Implemented COLR/CPAL layered color outline path (scale_color_outline_into + Render ColorOutline). Uses moon_skrifa color_glyphs/layers + color_palettes, rasterizes each layer to alpha mask and blits into RGBA via swash-reference blit port. Added Outline::get/Layer API and synthetic COLR/CPAL+glyf test. Commit: 166fce2.","created_at":"2026-01-27T08:35:37Z"},{"id":5,"issue_id":"moon_swash-or2","author":"Milky2018","text":"Added bitmap/color-bitmap scaling path: Scaler now supports has_bitmaps/has_color_bitmaps + scale_bitmap/scale_color_bitmap (StrikeWith selection), PNG decode + Mitchell resize, and Render now handles Source::Bitmap/ColorBitmap. Synthetic tests for sbix PNG + ebdt 1bpp. Commit: 7a41969.","created_at":"2026-01-27T09:15:44Z"}]}
{"id":"moon_swash-ro4","title":"Port swash-reference core: string/variation names, scale variations, metrics","description":"Port remaining foundational modules to align moon_swash with swash-reference: string.rs, scale builder variation behavior, metrics.rs (incl proxies + variable adjustments).","notes":"\\nAll child tasks complete (ro4.1-3).","status":"closed","priority":1,"issue_type":"epic","owner":"842376130@qq.com","created_at":"2026-01-27T18:31:21.163041+08:00","created_by":"Milky2018","updated_at":"2026-01-27T19:30:57.040573+08:00","closed_at":"2026-01-27T19:30:57.040573+08:00","close_reason":"epic complete"}
{"id":"moon_swash-ro4.1","title":"string: port localized strings (StringId/LocalizedStrings/LocalizedString/Chars)","description":"Port swash-reference src/string.rs APIs/behavior (name table parsing, language mapping, encodings, Chars iterator) and wire FontRef + variation instance name helpers.","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T18:31:44.763029+08:00","created_by":"Milky2018","updated_at":"2026-01-27T18:50:09.48127+08:00","closed_at":"2026-01-27T18:50:09.48127+08:00","close_reason":"Ported string.rs (StringId/LocalizedStrings/LocalizedString) and wired Variation/Instance name helpers","dependencies":[{"issue_id":"moon_swash-ro4.1","depends_on_id":"moon_swash-ro4","type":"parent-child","created_at":"2026-01-27T18:31:44.763947+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro4.2","title":"scale: align ScalerBuilder::variations with swash-reference","description":"Change ScaleContext/ScalerBuilder to store coords like swash-reference: variations(settings) iterates FontRef::variations and sets coords by axis index; normalized_coords replaces coords. Remove var_settings.","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T18:31:59.927141+08:00","created_by":"Milky2018","updated_at":"2026-01-27T18:53:17.621386+08:00","closed_at":"2026-01-27T18:53:17.621386+08:00","close_reason":"Updated ScalerBuilder variations/normalized_coords to match swash-reference coords workflow","dependencies":[{"issue_id":"moon_swash-ro4.2","depends_on_id":"moon_swash-ro4","type":"parent-child","created_at":"2026-01-27T18:31:59.928043+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro4.3","title":"metrics: port MetricsProxy/Metrics/GlyphMetrics (+ var adjustments)","description":"Port swash-reference src/metrics.rs including MetricsProxy::from_font/materialize_metrics/materialize_glyph_metrics, Metrics, GlyphMetrics and required internal tables (vorg/var etc).","notes":"Start porting swash-reference metrics.rs + required internal var/vorg/os2/post support\n\\nDone:\\n- src/metrics.mbt: MetricsProxy/Metrics/GlyphMetrics + FontRef::metrics/glyph_metrics\\n- src/font.mbt: FontRef table helpers (table_offset/head/os2/post/maxp/hhea/vhea)\\n- src/internal/head.mbt: Os2/Post parsing + Os2Flags\\n- src/internal/var.mbt: ItemVariationStore delta eval (MVAR/HVAR/VVAR)\\n- src/internal/vorg.mbt: VORG origin lookup\\n- src/metrics_test.mbt: tests for MVAR/HVAR + vertical metrics\\n\\nQuality gates: moon check/test, moon info \u0026\u0026 moon fmt","status":"closed","priority":1,"issue_type":"task","assignee":"Milky2018","owner":"842376130@qq.com","created_at":"2026-01-27T18:32:13.919921+08:00","created_by":"Milky2018","updated_at":"2026-01-27T19:30:51.038923+08:00","closed_at":"2026-01-27T19:30:51.038923+08:00","close_reason":"metrics port complete","dependencies":[{"issue_id":"moon_swash-ro4.3","depends_on_id":"moon_swash-ro4","type":"parent-child","created_at":"2026-01-27T18:32:13.921525+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro5","title":"Port swash-reference metadata: attributes, palette, strike","description":"Continue strict port of swash-reference. Next modules: attributes.rs (stretch/weight/style + synthesis), palette.rs (CPAL/COLR), strike.rs (bitmap strikes).","status":"closed","priority":1,"issue_type":"epic","owner":"842376130@qq.com","created_at":"2026-01-27T19:38:42.015321+08:00","created_by":"Milky2018","updated_at":"2026-01-27T20:20:01.776877+08:00","closed_at":"2026-01-27T20:20:01.776877+08:00","close_reason":"Closed"}
{"id":"moon_swash-ro5.1","title":"attributes: port Attributes/Stretch/Weight/Style/Synthesis","description":"Port swash-reference/src/attributes.rs and wire FontRef::attributes().","notes":"Start attributes.rs port\n\\nDone:\\n- src/attributes.mbt: port Attributes/Stretch/Weight/Style/ObliqueAngle/Synthesis + FontRef::attributes\\n- src/internal/head.mbt: add Os2::weight_class/width_class and Os2Flags::italic/oblique\\n- src/attributes_test.mbt: basic OS/2 flag + synthesize tests\\nQuality gates: moon test, moon info \u0026\u0026 moon fmt","status":"closed","priority":1,"issue_type":"task","assignee":"Milky2018","owner":"842376130@qq.com","created_at":"2026-01-27T19:39:14.850633+08:00","created_by":"Milky2018","updated_at":"2026-01-27T19:55:01.23067+08:00","closed_at":"2026-01-27T19:55:01.23067+08:00","close_reason":"attributes port complete","dependencies":[{"issue_id":"moon_swash-ro5.1","depends_on_id":"moon_swash-ro5","type":"parent-child","created_at":"2026-01-27T19:39:36.512671+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro5.2","title":"palette: port CPAL/COLR palette APIs","description":"Port swash-reference/src/palette.rs and any needed internal tables.","notes":"Start palette.rs port\n\\nDone:\\n- src/palette.mbt: port ColorPalettes/ColorPalette + Usability + FontRef::color_palettes\\n- src/palette_test.mbt: CPAL v0 color decoding test\\nQuality gates: moon test, moon info \u0026\u0026 moon fmt","status":"closed","priority":1,"issue_type":"task","assignee":"Milky2018","owner":"842376130@qq.com","created_at":"2026-01-27T19:39:20.207188+08:00","created_by":"Milky2018","updated_at":"2026-01-27T19:59:26.139853+08:00","closed_at":"2026-01-27T19:59:26.139853+08:00","close_reason":"palette port complete","dependencies":[{"issue_id":"moon_swash-ro5.2","depends_on_id":"moon_swash-ro5","type":"parent-child","created_at":"2026-01-27T19:39:41.843085+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro5.3","title":"strike: port BitmapStrike + strikes iterators","description":"Port swash-reference/src/strike.rs (sbix/cblc/cbdt) and proxies.","notes":"Start strike.rs port","status":"closed","priority":1,"issue_type":"task","assignee":"Milky2018","owner":"842376130@qq.com","created_at":"2026-01-27T19:39:25.575488+08:00","created_by":"Milky2018","updated_at":"2026-01-27T20:20:01.679241+08:00","closed_at":"2026-01-27T20:20:01.679241+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moon_swash-ro5.3","depends_on_id":"moon_swash-ro5","type":"parent-child","created_at":"2026-01-27T19:39:47.120763+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro6","title":"Port swash-reference feature enumeration","description":"Port swash-reference  and the minimal  types it depends on (Language/Script OpenType tag mapping).","status":"closed","priority":1,"issue_type":"epic","owner":"842376130@qq.com","created_at":"2026-01-27T20:25:52.924329+08:00","created_by":"Milky2018","updated_at":"2026-01-27T21:14:55.546212+08:00","closed_at":"2026-01-27T21:14:55.546212+08:00","close_reason":"Feature enumeration matches swash-reference (AT + AAT)"}
{"id":"moon_swash-ro6.1","title":"text: port Language + Script tag mapping","description":"Port swash-reference text language parsing and OpenType tag mapping needed by feature (Language::parse/from_opentype, Script::from_opentype + Script enum + tags table).","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T20:26:35.671609+08:00","created_by":"Milky2018","updated_at":"2026-01-27T20:40:12.672656+08:00","closed_at":"2026-01-27T20:40:12.672656+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moon_swash-ro6.1","depends_on_id":"moon_swash-ro6","type":"parent-child","created_at":"2026-01-27T20:26:35.767021+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro6.2","title":"feature: port GSUB/GPOS writing systems","description":"Port swash-reference feature/mod.rs + feature/at.rs + feature/util.rs for OpenType (GSUB/GPOS) writing systems and feature enumeration.","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T20:26:35.882811+08:00","created_by":"Milky2018","updated_at":"2026-01-27T21:02:01.438223+08:00","closed_at":"2026-01-27T21:02:01.438223+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moon_swash-ro6.2","depends_on_id":"moon_swash-ro6","type":"parent-child","created_at":"2026-01-27T20:26:35.978366+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro6.3","title":"feature: port AAT (morx) writing systems","description":"Port swash-reference feature/aat.rs for Apple Advanced Typography (morx + kern/kerx) writing systems and feature enumeration.","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T20:26:36.092892+08:00","created_by":"Milky2018","updated_at":"2026-01-27T21:14:55.478934+08:00","closed_at":"2026-01-27T21:14:55.478934+08:00","close_reason":"AAT (morx) feature + DFLT writing system ported","dependencies":[{"issue_id":"moon_swash-ro6.3","depends_on_id":"moon_swash-ro6","type":"parent-child","created_at":"2026-01-27T20:26:36.189898+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-yob","title":"cache: port FontCache LRU for per-font proxies","description":"Port swash-reference FontCache\u003cT\u003e (simple LRU by epoch) so ScaleContext can cache per-font proxies like metrics/color/bitmaps later.","status":"closed","priority":2,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T18:18:35.071174+08:00","created_by":"Milky2018","updated_at":"2026-01-27T18:21:34.540435+08:00","closed_at":"2026-01-27T18:21:34.540435+08:00","close_reason":"Ported FontCache\u003cT\u003e LRU helper (cache.rs)"}
