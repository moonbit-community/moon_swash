{"id":"moon_swash-2ck","title":"variation: add FontRef::variations/instances APIs","description":"Port swash-reference variation.rs surface: NormalizedCoord alias, Variation/Instance iteration, and FontRef helpers. Implementation can leverage moon_skrifa AxisCollection/NamedInstanceCollection for normalization + AVAR.","status":"closed","priority":2,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T18:24:06.749687+08:00","created_by":"Milky2018","updated_at":"2026-01-27T18:28:22.82557+08:00","closed_at":"2026-01-27T18:28:22.82557+08:00","close_reason":"Added Variation/Instance APIs and NormalizedCoord alias"}
{"id":"moon_swash-9g1","title":"Scale: support variable font coords (Setting + normalized_coords)","description":"Port swash-reference Setting\u003cT\u003e parsing (u16/f32) and wire ScalerBuilder.variations/normalized_coords so ScaleContext passes LocationRef with coords to skrifa outlines/hinting.","status":"closed","priority":2,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T17:55:33.981798+08:00","created_by":"Milky2018","updated_at":"2026-01-27T18:15:49.899119+08:00","closed_at":"2026-01-27T18:15:49.899119+08:00","close_reason":"Added Setting parsers and wired ScalerBuilder variation coords support"}
{"id":"moon_swash-b4h","title":"Scale/bitmap: port PNG decode pipeline using moon_yazi zlib","description":"swash-reference uses yazi to inflate PNG IDAT (zlib) when decoding embedded bitmap glyphs. Port scale/bitmap/png.rs behavior in MoonBit on top of moon_yazi, wire into renderer once bitmap/color bitmap sources are implemented.","status":"closed","priority":3,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-25T00:37:13.814822+08:00","created_by":"Milky2018","updated_at":"2026-01-27T17:15:30.671028+08:00","closed_at":"2026-01-27T17:15:30.671028+08:00","close_reason":"Closed","comments":[{"id":4,"issue_id":"moon_swash-b4h","author":"Milky2018","text":"Ported swash-reference PNG decode pipeline and wired into scale_bitmap for sbix/cbdt PNG glyphs. Implemented decode_png in src/scale/bitmap_png.mbt (yazi zlib IDAT inflation + filters), added Mitchell resizer and EBDT 1bpp decoder in src/scale/bitmap.mbt, and added synthetic sbix+ebdt tests. Commit: 7a41969.","created_at":"2026-01-27T09:15:18Z"}]}
{"id":"moon_swash-bye","title":"verify: investigate outline bounds mismatch vs swash-reference (tighten tol)","description":"The Python verifier tools/verify_swash_reference.py currently needs a loose numeric tolerance (default 0.05) to pass on /System/Library/Fonts/Supplemental/Arial.ttf at size 14. Example mismatch observed with --tol 0.001: scale.outline.bounds differs (~0.016).\n\nGoal: find root cause (f32 vs f64 rounding, outline point generation, bounds calculation) and reduce the needed tolerance while preserving behavior parity.","acceptance_criteria":"Running: python3 tools/verify_swash_reference.py --font /System/Library/Fonts/Supplemental/Arial.ttf --size 14 --tol 0.001 passes (or document/justify remaining deltas).","notes":"Findings (2026-01-29): for Arial.ttf size=14 hint=false, only mismatch observed is outline.bounds min_y by exactly 1/64 (ref -0.171875 vs moon -0.15625). Default verifier tol tightened from 0.05 -\u003e 0.02; --tol 0.001 still fails.\nREADME now documents the ~1/64 outline bounds delta and verifier default tol (0.02).","status":"closed","priority":2,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-29T10:54:52.196462+08:00","created_by":"Milky2018","updated_at":"2026-01-29T11:13:18.942766+08:00","closed_at":"2026-01-29T11:13:18.942766+08:00","close_reason":"Closed"}
{"id":"moon_swash-or2","title":"Scale: adopt moon_skrifa outlines/hinting to match swash-reference","description":"Current ScaleContext/Scaler uses a manual glyf decoder fallback. Align with swash-reference by using moon_skrifa OutlineGlyphCollection draw + hinting (size/variations), and remove the manual TrueType glyf decoding path once moon_skrifa APIs are sufficient.","status":"closed","priority":2,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-25T00:37:12.808106+08:00","created_by":"Milky2018","updated_at":"2026-01-27T17:50:45.878909+08:00","closed_at":"2026-01-27T17:50:45.878909+08:00","close_reason":"Implemented skrifa hinting instance cache and integrated into scale builder","comments":[{"id":1,"issue_id":"moon_swash-or2","author":"Milky2018","text":"Checked moon_skrifa 0.1.2: outline module now uses Double PathElement coords, introduces core package with GlyphId wrapper, and includes embedded TT hinting engine + parity tests. Updated moon_swash scale package imports/calls accordingly (now calling OutlineGlyphCollection::draw with DrawSettings and core.GlyphId).","created_at":"2026-01-27T07:15:27Z"},{"id":2,"issue_id":"moon_swash-or2","author":"Milky2018","text":"Implemented initial zeno-based Outline rendering: Render::render_into now rasterizes scaled outlines via moon_zeno Mask::with_scratch; Outline gained path() + embolden() port; GlyphId aligned to UInt16 like swash-reference; ScaleContext now holds render scratch state.","created_at":"2026-01-27T07:44:51Z"},{"id":3,"issue_id":"moon_swash-or2","author":"Milky2018","text":"Implemented COLR/CPAL layered color outline path (scale_color_outline_into + Render ColorOutline). Uses moon_skrifa color_glyphs/layers + color_palettes, rasterizes each layer to alpha mask and blits into RGBA via swash-reference blit port. Added Outline::get/Layer API and synthetic COLR/CPAL+glyf test. Commit: 166fce2.","created_at":"2026-01-27T08:35:37Z"},{"id":5,"issue_id":"moon_swash-or2","author":"Milky2018","text":"Added bitmap/color-bitmap scaling path: Scaler now supports has_bitmaps/has_color_bitmaps + scale_bitmap/scale_color_bitmap (StrikeWith selection), PNG decode + Mitchell resize, and Render now handles Source::Bitmap/ColorBitmap. Synthetic tests for sbix PNG + ebdt 1bpp. Commit: 7a41969.","created_at":"2026-01-27T09:15:44Z"}]}
{"id":"moon_swash-ro4","title":"Port swash-reference core: string/variation names, scale variations, metrics","description":"Port remaining foundational modules to align moon_swash with swash-reference: string.rs, scale builder variation behavior, metrics.rs (incl proxies + variable adjustments).","notes":"\\nAll child tasks complete (ro4.1-3).","status":"closed","priority":1,"issue_type":"epic","owner":"842376130@qq.com","created_at":"2026-01-27T18:31:21.163041+08:00","created_by":"Milky2018","updated_at":"2026-01-27T19:30:57.040573+08:00","closed_at":"2026-01-27T19:30:57.040573+08:00","close_reason":"epic complete"}
{"id":"moon_swash-ro4.1","title":"string: port localized strings (StringId/LocalizedStrings/LocalizedString/Chars)","description":"Port swash-reference src/string.rs APIs/behavior (name table parsing, language mapping, encodings, Chars iterator) and wire FontRef + variation instance name helpers.","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T18:31:44.763029+08:00","created_by":"Milky2018","updated_at":"2026-01-27T18:50:09.48127+08:00","closed_at":"2026-01-27T18:50:09.48127+08:00","close_reason":"Ported string.rs (StringId/LocalizedStrings/LocalizedString) and wired Variation/Instance name helpers","dependencies":[{"issue_id":"moon_swash-ro4.1","depends_on_id":"moon_swash-ro4","type":"parent-child","created_at":"2026-01-27T18:31:44.763947+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro4.2","title":"scale: align ScalerBuilder::variations with swash-reference","description":"Change ScaleContext/ScalerBuilder to store coords like swash-reference: variations(settings) iterates FontRef::variations and sets coords by axis index; normalized_coords replaces coords. Remove var_settings.","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T18:31:59.927141+08:00","created_by":"Milky2018","updated_at":"2026-01-27T18:53:17.621386+08:00","closed_at":"2026-01-27T18:53:17.621386+08:00","close_reason":"Updated ScalerBuilder variations/normalized_coords to match swash-reference coords workflow","dependencies":[{"issue_id":"moon_swash-ro4.2","depends_on_id":"moon_swash-ro4","type":"parent-child","created_at":"2026-01-27T18:31:59.928043+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro4.3","title":"metrics: port MetricsProxy/Metrics/GlyphMetrics (+ var adjustments)","description":"Port swash-reference src/metrics.rs including MetricsProxy::from_font/materialize_metrics/materialize_glyph_metrics, Metrics, GlyphMetrics and required internal tables (vorg/var etc).","notes":"Start porting swash-reference metrics.rs + required internal var/vorg/os2/post support\n\\nDone:\\n- src/metrics.mbt: MetricsProxy/Metrics/GlyphMetrics + FontRef::metrics/glyph_metrics\\n- src/font.mbt: FontRef table helpers (table_offset/head/os2/post/maxp/hhea/vhea)\\n- src/internal/head.mbt: Os2/Post parsing + Os2Flags\\n- src/internal/var.mbt: ItemVariationStore delta eval (MVAR/HVAR/VVAR)\\n- src/internal/vorg.mbt: VORG origin lookup\\n- src/metrics_test.mbt: tests for MVAR/HVAR + vertical metrics\\n\\nQuality gates: moon check/test, moon info \u0026\u0026 moon fmt","status":"closed","priority":1,"issue_type":"task","assignee":"Milky2018","owner":"842376130@qq.com","created_at":"2026-01-27T18:32:13.919921+08:00","created_by":"Milky2018","updated_at":"2026-01-27T19:30:51.038923+08:00","closed_at":"2026-01-27T19:30:51.038923+08:00","close_reason":"metrics port complete","dependencies":[{"issue_id":"moon_swash-ro4.3","depends_on_id":"moon_swash-ro4","type":"parent-child","created_at":"2026-01-27T18:32:13.921525+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro5","title":"Port swash-reference metadata: attributes, palette, strike","description":"Continue strict port of swash-reference. Next modules: attributes.rs (stretch/weight/style + synthesis), palette.rs (CPAL/COLR), strike.rs (bitmap strikes).","status":"closed","priority":1,"issue_type":"epic","owner":"842376130@qq.com","created_at":"2026-01-27T19:38:42.015321+08:00","created_by":"Milky2018","updated_at":"2026-01-27T20:20:01.776877+08:00","closed_at":"2026-01-27T20:20:01.776877+08:00","close_reason":"Closed"}
{"id":"moon_swash-ro5.1","title":"attributes: port Attributes/Stretch/Weight/Style/Synthesis","description":"Port swash-reference/src/attributes.rs and wire FontRef::attributes().","notes":"Start attributes.rs port\n\\nDone:\\n- src/attributes.mbt: port Attributes/Stretch/Weight/Style/ObliqueAngle/Synthesis + FontRef::attributes\\n- src/internal/head.mbt: add Os2::weight_class/width_class and Os2Flags::italic/oblique\\n- src/attributes_test.mbt: basic OS/2 flag + synthesize tests\\nQuality gates: moon test, moon info \u0026\u0026 moon fmt","status":"closed","priority":1,"issue_type":"task","assignee":"Milky2018","owner":"842376130@qq.com","created_at":"2026-01-27T19:39:14.850633+08:00","created_by":"Milky2018","updated_at":"2026-01-27T19:55:01.23067+08:00","closed_at":"2026-01-27T19:55:01.23067+08:00","close_reason":"attributes port complete","dependencies":[{"issue_id":"moon_swash-ro5.1","depends_on_id":"moon_swash-ro5","type":"parent-child","created_at":"2026-01-27T19:39:36.512671+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro5.2","title":"palette: port CPAL/COLR palette APIs","description":"Port swash-reference/src/palette.rs and any needed internal tables.","notes":"Start palette.rs port\n\\nDone:\\n- src/palette.mbt: port ColorPalettes/ColorPalette + Usability + FontRef::color_palettes\\n- src/palette_test.mbt: CPAL v0 color decoding test\\nQuality gates: moon test, moon info \u0026\u0026 moon fmt","status":"closed","priority":1,"issue_type":"task","assignee":"Milky2018","owner":"842376130@qq.com","created_at":"2026-01-27T19:39:20.207188+08:00","created_by":"Milky2018","updated_at":"2026-01-27T19:59:26.139853+08:00","closed_at":"2026-01-27T19:59:26.139853+08:00","close_reason":"palette port complete","dependencies":[{"issue_id":"moon_swash-ro5.2","depends_on_id":"moon_swash-ro5","type":"parent-child","created_at":"2026-01-27T19:39:41.843085+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro5.3","title":"strike: port BitmapStrike + strikes iterators","description":"Port swash-reference/src/strike.rs (sbix/cblc/cbdt) and proxies.","notes":"Start strike.rs port","status":"closed","priority":1,"issue_type":"task","assignee":"Milky2018","owner":"842376130@qq.com","created_at":"2026-01-27T19:39:25.575488+08:00","created_by":"Milky2018","updated_at":"2026-01-27T20:20:01.679241+08:00","closed_at":"2026-01-27T20:20:01.679241+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moon_swash-ro5.3","depends_on_id":"moon_swash-ro5","type":"parent-child","created_at":"2026-01-27T19:39:47.120763+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro6","title":"Port swash-reference feature enumeration","description":"Port swash-reference  and the minimal  types it depends on (Language/Script OpenType tag mapping).","status":"closed","priority":1,"issue_type":"epic","owner":"842376130@qq.com","created_at":"2026-01-27T20:25:52.924329+08:00","created_by":"Milky2018","updated_at":"2026-01-27T21:14:55.546212+08:00","closed_at":"2026-01-27T21:14:55.546212+08:00","close_reason":"Feature enumeration matches swash-reference (AT + AAT)"}
{"id":"moon_swash-ro6.1","title":"text: port Language + Script tag mapping","description":"Port swash-reference text language parsing and OpenType tag mapping needed by feature (Language::parse/from_opentype, Script::from_opentype + Script enum + tags table).","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T20:26:35.671609+08:00","created_by":"Milky2018","updated_at":"2026-01-27T20:40:12.672656+08:00","closed_at":"2026-01-27T20:40:12.672656+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moon_swash-ro6.1","depends_on_id":"moon_swash-ro6","type":"parent-child","created_at":"2026-01-27T20:26:35.767021+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro6.2","title":"feature: port GSUB/GPOS writing systems","description":"Port swash-reference feature/mod.rs + feature/at.rs + feature/util.rs for OpenType (GSUB/GPOS) writing systems and feature enumeration.","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T20:26:35.882811+08:00","created_by":"Milky2018","updated_at":"2026-01-27T21:02:01.438223+08:00","closed_at":"2026-01-27T21:02:01.438223+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moon_swash-ro6.2","depends_on_id":"moon_swash-ro6","type":"parent-child","created_at":"2026-01-27T20:26:35.978366+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro6.3","title":"feature: port AAT (morx) writing systems","description":"Port swash-reference feature/aat.rs for Apple Advanced Typography (morx + kern/kerx) writing systems and feature enumeration.","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T20:26:36.092892+08:00","created_by":"Milky2018","updated_at":"2026-01-27T21:14:55.478934+08:00","closed_at":"2026-01-27T21:14:55.478934+08:00","close_reason":"AAT (morx) feature + DFLT writing system ported","dependencies":[{"issue_id":"moon_swash-ro6.3","depends_on_id":"moon_swash-ro6","type":"parent-child","created_at":"2026-01-27T20:26:36.189898+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro7","title":"shape: port swash-reference shaping","description":"Strict port of swash-reference/src/shape/* into MoonBit, using skrifa/zeno/yazi where applicable.","status":"closed","priority":1,"issue_type":"epic","owner":"842376130@qq.com","created_at":"2026-01-27T21:17:08.916079+08:00","created_by":"Milky2018","updated_at":"2026-01-28T16:23:28.265149+08:00","closed_at":"2026-01-28T16:23:28.265149+08:00","close_reason":"Closed"}
{"id":"moon_swash-ro7.1","title":"shape: buffer + cluster","description":"Port shape/buffer.rs + cluster.rs + partition.rs; provide Buffer API and basic tests.","notes":"Implemented shape package skeleton: shaper builder/context (Direction/ShapeContext/ShaperBuilder/Shaper), partition shaper (font selector + options), and tests. Also added ClusterChar::new in text_cluster. Ran moon info \u0026\u0026 moon fmt, moon check, moon test.","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T21:17:40.183132+08:00","created_by":"Milky2018","updated_at":"2026-01-28T12:29:49.224659+08:00","closed_at":"2026-01-28T12:29:49.224663+08:00","dependencies":[{"issue_id":"moon_swash-ro7.1","depends_on_id":"moon_swash-ro7","type":"parent-child","created_at":"2026-01-27T21:17:40.453114+08:00","created_by":"Milky2018"},{"issue_id":"moon_swash-ro7.1","depends_on_id":"moon_swash-ro8.2","type":"blocks","created_at":"2026-01-27T21:24:15.013648+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro7.2","title":"shape: AT shaper","description":"Port shape/at.rs + engine.rs integration for OpenType GSUB/GPOS shaping.","status":"closed","priority":1,"issue_type":"task","assignee":"Milky2018","owner":"842376130@qq.com","created_at":"2026-01-27T21:17:40.278332+08:00","created_by":"Milky2018","updated_at":"2026-01-28T15:08:19.954715+08:00","closed_at":"2026-01-28T15:08:19.954715+08:00","close_reason":"OT shaping (GSUB/GPOS) port complete: at.rs + engine integration + shaper pipeline; moon check/test pass","dependencies":[{"issue_id":"moon_swash-ro7.2","depends_on_id":"moon_swash-ro7","type":"parent-child","created_at":"2026-01-27T21:17:40.528311+08:00","created_by":"Milky2018"},{"issue_id":"moon_swash-ro7.2","depends_on_id":"moon_swash-ro7.1","type":"blocks","created_at":"2026-01-27T21:24:15.079956+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro7.2.1","title":"shape: OT feature constants + groups","description":"Port  + implement  and feature mask plumbing.","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-28T13:04:38.618991+08:00","created_by":"Milky2018","updated_at":"2026-01-28T13:06:54.657029+08:00","closed_at":"2026-01-28T13:06:54.657029+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moon_swash-ro7.2.1","depends_on_id":"moon_swash-ro7.2","type":"parent-child","created_at":"2026-01-28T13:04:38.619736+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro7.2.2","title":"shape: GDEF table wrapper","description":"Port GDEF parsing used by OT shaping (glyph class + mark attachment class).","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-28T13:04:38.70299+08:00","created_by":"Milky2018","updated_at":"2026-01-28T13:13:54.230907+08:00","closed_at":"2026-01-28T13:13:54.230907+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moon_swash-ro7.2.2","depends_on_id":"moon_swash-ro7.2","type":"parent-child","created_at":"2026-01-28T13:04:38.703667+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro7.2.3","title":"shape: OT lookup apply (GSUB/GPOS)","description":"Port  lookup cache + apply logic, and wire into .","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-28T13:04:38.785131+08:00","created_by":"Milky2018","updated_at":"2026-01-28T14:39:39.29002+08:00","closed_at":"2026-01-28T14:39:39.29002+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moon_swash-ro7.2.3","depends_on_id":"moon_swash-ro7.2","type":"parent-child","created_at":"2026-01-28T13:04:38.785837+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro7.2.4","title":"shape: OT coverage cache (FeatureStore.coverage)","description":"Port CoverageBuilder/BitSet from swash-reference/src/shape/at.rs so FeatureStore.covers(key,gid) can be used (lookup.coverage key), and wire builder to populate store.coverage + lookup.coverage.","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-28T14:16:18.278794+08:00","created_by":"Milky2018","updated_at":"2026-01-28T14:46:09.797587+08:00","closed_at":"2026-01-28T14:46:09.797587+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moon_swash-ro7.2.4","depends_on_id":"moon_swash-ro7.2","type":"parent-child","created_at":"2026-01-28T14:16:18.35502+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro7.2.5","title":"shape: OT shaper pipeline (add_cluster/finish/shape_with)","description":"Port swash-reference/src/shape/mod.rs shaper behavior for OT: add_cluster, finish, shape_with; ensure Engine::gsub/gpos are applied with correct stages/masks/ranges.","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-28T14:16:18.450067+08:00","created_by":"Milky2018","updated_at":"2026-01-28T15:06:59.162739+08:00","closed_at":"2026-01-28T15:06:59.162739+08:00","close_reason":"Fix OT shaper pipeline compilation and align source-range handling: SourceRange::new, char-\u003ecodepoint mapping, ShapeClass variant match; moon check/test pass","dependencies":[{"issue_id":"moon_swash-ro7.2.5","depends_on_id":"moon_swash-ro7.2","type":"parent-child","created_at":"2026-01-28T14:16:18.526414+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro7.3","title":"shape: AAT shaper","description":"Port shape/aat.rs + morx/kerx/kern integration for AAT shaping.","status":"closed","priority":1,"issue_type":"task","assignee":"Milky2018","owner":"842376130@qq.com","created_at":"2026-01-27T21:17:40.377453+08:00","created_by":"Milky2018","updated_at":"2026-01-28T16:23:28.172445+08:00","closed_at":"2026-01-28T16:23:28.172445+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moon_swash-ro7.3","depends_on_id":"moon_swash-ro7","type":"parent-child","created_at":"2026-01-27T21:17:40.609546+08:00","created_by":"Milky2018"},{"issue_id":"moon_swash-ro7.3","depends_on_id":"moon_swash-ro7.1","type":"blocks","created_at":"2026-01-27T21:24:15.144159+08:00","created_by":"Milky2018"}],"comments":[{"id":6,"issue_id":"moon_swash-ro7.3","author":"Milky2018","text":"Implemented AAT shaping: ported internal AAT parsers (morx/kerx/kern + state tables + tag-\u003eselector mapping), added shape/aat apply_morx/apply_kerx/apply_kern, integrated Engine/Shaper dispatch, and added tests (aat_lookup + kern format0 end-to-end). moon test passes.","created_at":"2026-01-28T08:23:28Z"}]}
{"id":"moon_swash-ro8","title":"text: port unicode + cluster","description":"Port swash-reference/src/text/*: unicode properties, normalization (compose/decompose), cluster segmentation, and boundary analysis.","status":"closed","priority":1,"issue_type":"epic","owner":"842376130@qq.com","created_at":"2026-01-27T21:24:14.512651+08:00","created_by":"Milky2018","updated_at":"2026-01-28T10:49:59.038544+08:00","closed_at":"2026-01-28T10:49:59.038545+08:00"}
{"id":"moon_swash-ro8.1","title":"text: unicode properties","description":"Port text/unicode.rs + unicode_data.rs + compose.rs minimal API (Properties, Codepoint, JoiningType, mirrors/brackets, compose/decompose).","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T21:24:14.59088+08:00","created_by":"Milky2018","updated_at":"2026-01-28T01:29:50.643948+08:00","closed_at":"2026-01-28T01:29:50.643948+08:00","close_reason":"Port unicode_data + properties + compose/decompose (Unicode 13.0.0)","dependencies":[{"issue_id":"moon_swash-ro8.1","depends_on_id":"moon_swash-ro8","type":"parent-child","created_at":"2026-01-27T21:24:14.816127+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro8.2","title":"text: cluster parser","description":"Port text/cluster/* (Token/CharInfo/CharCluster/Parser + complex+myanmar rules).","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T21:24:14.672195+08:00","created_by":"Milky2018","updated_at":"2026-01-28T10:30:57.284098+08:00","closed_at":"2026-01-28T10:30:57.284102+08:00","dependencies":[{"issue_id":"moon_swash-ro8.2","depends_on_id":"moon_swash-ro8","type":"parent-child","created_at":"2026-01-27T21:24:14.882407+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro8.3","title":"text: analyze boundaries","description":"Port text/analyze.rs for boundary analysis (word breaks, line breaks).","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T21:24:14.749912+08:00","created_by":"Milky2018","updated_at":"2026-01-28T10:48:46.400748+08:00","closed_at":"2026-01-28T10:48:46.400749+08:00","dependencies":[{"issue_id":"moon_swash-ro8.3","depends_on_id":"moon_swash-ro8","type":"parent-child","created_at":"2026-01-27T21:24:14.947895+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro9","title":"Finish swash-reference parity: remaining public APIs + internal tables","description":"Goal: close remaining gaps vs ./swash-reference.\n\nScope (initial):\n- internal/head: Post glyph names + FontRef::glyph_name, plus remaining Maxp/Os2/etc accessors if needed.\n- internal/var + variation API parity: Fvar parsing + Variations/VariationsProxy/Instances helpers.\n- font: TableProvider + iter/proxy module parity.\n- scale: ScaleContext API parity (with_max_entries/builder_with_id) and caching/proxies if required.\n\nVerification:\n- moon test\n- Add/extend tests around post glyph names and variations normalized coords.\n","status":"closed","priority":1,"issue_type":"epic","owner":"842376130@qq.com","created_at":"2026-01-28T16:43:32.814901+08:00","created_by":"Milky2018","updated_at":"2026-01-28T18:20:21.384637+08:00","closed_at":"2026-01-28T18:20:21.384637+08:00","close_reason":"All scoped parity tasks closed (ro9.1..ro9.5); scale proxy caching and variations parity implemented; moon test/check pass."}
{"id":"moon_swash-ro9.1","title":"internal/head: Post glyph names + FontRef::glyph_name (and complete Maxp accessors)","description":"Port Post::has_names/name logic from swash-reference/src/internal/head.rs, including default glyph name table (258 entries) and v2.0 custom names parsing.\n\nAdd FontRef::glyph_name (doc-hidden upstream) that calls Post::name.\n\nAlso audit internal/head.mbt vs reference for missing Maxp/Os2 methods; implement at least the methods used by other code, plus the rest if we aim for full table parity.\n\nTests:\n- Construct minimal post v1.0 and v2.0 buffers and verify name lookup.\n- Smoke test FontRef::glyph_name on a known font (if fixtures exist) or via synthetic table injection.\n","notes":"Added Post glyph name support (v1.0 default names + v2.0 custom strings) and FontRef::glyph_name; ported remaining Maxp max_* accessors; added tests (internal/post_test.mbt, font_glyph_name_test.mbt).","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-28T16:44:03.703747+08:00","created_by":"Milky2018","updated_at":"2026-01-28T17:27:34.828747+08:00","closed_at":"2026-01-28T17:27:34.828747+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moon_swash-ro9.1","depends_on_id":"moon_swash-ro9","type":"parent-child","created_at":"2026-01-28T16:44:09.313433+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro9.2","title":"variation: port Variations/VariationsProxy (+ normalized_coords/find_by_tag) from swash-reference","description":"Current MoonBit API exposes FontRef::variations/instances as Iter over wrappers backed by moon_skrifa. For full swash-reference parity, port the collection types and proxy:\n\n- internal/var: add Fvar table parsing (axis/instance) and VarAxis/VarInstance types as in swash-reference/src/internal/var.rs.\n- variation: implement Variations, VariationsProxy, and Instances/InstancesProxy if applicable, matching upstream APIs:\n  - Variations::find_by_tag\n  - Variations::normalized_coords(settings)\n  - VariationsProxy::from_font/materialize\n\nKeep existing iterator-based convenience APIs if they are used elsewhere, but route them through the new implementation if possible.\n\nTests:\n- Synthetic fvar table to validate axis parsing, find_by_tag.\n- Normalized coords behavior for settings list (including min/max clamp).\n","notes":"Ported internal fvar/avar parsing (Fvar/VarAxis/VarInstance + adjust_axis), added VariationsProxy/Variations/Instances APIs, switched FontRef::variations/instances to return iterator types (with .iter()), updated call sites (attributes/shape/scale), removed unused root skrifa dep, and added synthetic tests for normalized coords + avar remap.","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-28T16:44:19.832413+08:00","created_by":"Milky2018","updated_at":"2026-01-28T17:54:46.121428+08:00","closed_at":"2026-01-28T17:54:46.121428+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moon_swash-ro9.2","depends_on_id":"moon_swash-ro9","type":"parent-child","created_at":"2026-01-28T16:44:25.078039+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro9.3","title":"font API parity: TableProvider trait + iter/proxy subpackages (optional)","description":"Port swash-reference TableProvider trait (table_by_tag) and provide basic iterator wrapper types where Rust exposes them:\n\n- Add pub(open) trait TableProvider with fn table_by_tag(Tag) -\u003e BytesView? (or BytesView? consistent with existing API).\n- Impl TableProvider for FontRef.\n\nOptional for module parity:\n- Add subpackages Milky2018/moon_swash/iter and Milky2018/moon_swash/proxy that re-export existing iterator/proxy types (Features, WritingSystems, Fonts, ColorPalettes, BitmapStrikes, LocalizedStrings, Variations, Instances, and *Proxy types).\n\nTests:\n- TableProvider::table_by_tag returns same as FontRef::table_data for a known table.\n","notes":"Added TableProvider trait (table_by_tag) and impl for FontRef; validated via font_glyph_name_test.mbt. Iter/proxy subpackages deferred until variation/iterator parity (ro9.2).","status":"closed","priority":2,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-28T16:44:35.649315+08:00","created_by":"Milky2018","updated_at":"2026-01-28T17:27:34.829726+08:00","closed_at":"2026-01-28T17:27:34.829726+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moon_swash-ro9.3","depends_on_id":"moon_swash-ro9","type":"parent-child","created_at":"2026-01-28T16:44:51.227983+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro9.4","title":"scale: ScaleContext API parity (with_max_entries/builder_with_id) + caching/proxy alignment","description":"ScaleContext currently supports new() and builder(font) only. Upstream swash-reference exposes:\n- ScaleContext::with_max_entries(max_entries)\n- ScaleContext::builder_with_id(font, id)\n\nAdditionally, upstream uses FontCache\u003cScalerProxy\u003e and proxy rematerialization for performance.\n\nImplement the missing API surface first (even if it reuses current implementation), then decide whether to port caching/proxy internals (ScalerProxy) for true parity.\n\nTests:\n- builder_with_id does not panic and produces a scaler.\n- with_max_entries clamps/validates similarly to upstream (1..=64).\n","notes":"Implemented ScaleContext::with_max_entries and ::builder_with_id; threaded id override into HintingCache key; added scale/context_test.mbt smoke tests.","status":"closed","priority":1,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-28T16:44:59.531595+08:00","created_by":"Milky2018","updated_at":"2026-01-28T17:27:34.830553+08:00","closed_at":"2026-01-28T17:27:34.830553+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moon_swash-ro9.4","depends_on_id":"moon_swash-ro9","type":"parent-child","created_at":"2026-01-28T16:45:04.727043+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-ro9.5","title":"scale: port ScalerProxy + FontCache caching to match swash-reference","description":"Even with API parity, ScaleContext currently does not cache per-font proxies the same way swash-reference does (FontCache\u003cScalerProxy\u003e). For full port, implement:\n\n- ScalerProxy equivalent (metrics/color/bitmap info needed by Scaler).\n- ScaleContext fonts cache with max_entries.\n- builder/builder_with_id returning builders bound to cached proxy + stable id.\n\nNon-goal: micro-optimizations; goal is behavior parity and equivalent cache invalidation/eviction strategy.\n\nVerification:\n- Unit test: repeated builder() calls for same font reuse cached proxy (can assert via internal counters or observable behavior).\n","status":"closed","priority":2,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-28T17:30:08.288808+08:00","created_by":"Milky2018","updated_at":"2026-01-28T18:16:17.074493+08:00","closed_at":"2026-01-28T18:16:17.074493+08:00","close_reason":"Implemented ScalerProxy caching + COLR ColorProxy parity; added unit test; moon test/check pass.","dependencies":[{"issue_id":"moon_swash-ro9.5","depends_on_id":"moon_swash-ro9","type":"parent-child","created_at":"2026-01-28T17:30:19.862626+08:00","created_by":"Milky2018"}]}
{"id":"moon_swash-st6","title":"verify: python diff harness vs swash-reference","notes":"Added MoonBit WASI dump tool (tools/moon_swash_dump) + Python verifier (tools/verify_swash_reference.py) to diff against ./swash-reference/bin/dump_json; documented in README.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T10:07:51.89297+08:00","updated_at":"2026-01-29T10:53:54.353021+08:00","closed_at":"2026-01-29T10:53:54.353021+08:00","close_reason":"Closed"}
{"id":"moon_swash-ulp","title":"api: add iter/ and proxy/ subpackages for swash-reference parity","description":"swash-reference exposes iter and proxy modules that re-export iterator/proxy types. Add MoonBit packages:\n\n- src/iter: re-export Features, WritingSystems, Fonts (as Iter[FontRef]), ColorPalettes, BitmapStrikes, Chars (as Iter[Char]), LocalizedStrings, Instances, Variations\n- src/proxy: re-export CharmapProxy, MetricsProxy, BitmapStrikesProxy, VariationsProxy\n\nGoal: allow downstream code to import Milky2018/moon_swash/iter and Milky2018/moon_swash/proxy and get stable names.","acceptance_criteria":"moon check passes and importing these packages works (smoke test).","notes":"Implemented src/iter and src/proxy packages with type aliases for iterator/proxy names; moon clean/check/test pass.","status":"closed","priority":2,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-29T11:17:28.43396+08:00","created_by":"Milky2018","updated_at":"2026-01-29T11:19:37.570565+08:00","closed_at":"2026-01-29T11:19:37.570565+08:00","close_reason":"Closed"}
{"id":"moon_swash-yob","title":"cache: port FontCache LRU for per-font proxies","description":"Port swash-reference FontCache\u003cT\u003e (simple LRU by epoch) so ScaleContext can cache per-font proxies like metrics/color/bitmaps later.","status":"closed","priority":2,"issue_type":"task","owner":"842376130@qq.com","created_at":"2026-01-27T18:18:35.071174+08:00","created_by":"Milky2018","updated_at":"2026-01-27T18:21:34.540435+08:00","closed_at":"2026-01-27T18:21:34.540435+08:00","close_reason":"Ported FontCache\u003cT\u003e LRU helper (cache.rs)"}
